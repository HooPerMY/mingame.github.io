System.register("chunks:///_virtual/battle",["./BattleEntityMgr.ts","./BattleScene.ts","./BattleBaseEntity.ts","./BattleCubeEntity.ts","./BattleCustomCube1x1Entity.ts","./BattleCustomDownEntity.ts","./BattleCustomEditorSuccessUI.ts","./BattleCustomEditorUI.ts","./BattleCustomFriendUI.ts","./BattleCustomMapUI.ts","./BattleCustomMapUIItem.ts","./BattleFailUI.ts","./BattleLevelSelectUI.ts","./BattleLevelSelectUIItem.ts","./BattleLevelSelectUIItems.ts","./BattlePropGetUI.ts","./BattleRunUI.ts","./BattleRunUIItem.ts","./BattleSuccessToDayUI.ts","./BattleSuccessUI.ts","./BattleToDayPropUI.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/BattleBaseEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseEntity.ts","./DirectorHelper.ts","./SceneMgr.ts","./Vector2.ts"],(function(t){"use strict";var e,n,i,s,c,r,o;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy},function(t){s=t.BaseEntity},function(t){c=t.ccclass},function(t){r=t.SceneMgr},function(t){o=t.Vector2}],execute:function(){var a;i._RF.push({},"2b29d/vBUtK96mAiSG/fxbd","BattleBaseEntity",void 0);new o,t("BattleBaseEntity",c("BattleBaseEntity")(a=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).entityType=void 0,e.isPut=void 0,e.isUpdateStateMackine=void 0,e.isDestroy=void 0,e}return e(i,t),n(i,[{key:"scene",get:function(){return r.getCurrent()}}]),i}(s))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/BattleCubeEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityDefine.ts","./DirectorHelper.ts","./NodeHelper.ts","./Maths.ts","./Move.ts","./Vector3.ts","./BattleDefine.ts","./InstanceExport.ts","./BattleBaseEntity.ts","./AudioMgr.ts","./TimerMgr.ts","./AABB.ts","./Vector2.ts","./UIMgr.ts"],(function(t){"use strict";var e,i,a,n,s,o,r,c,l,h,d,u,p,f,v,b,m,y,g,S,R,M,E,A,C,B,D,x;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,n=t.Vec3,s=t.MeshRenderer},function(t){o=t.EEntityState},function(t){r=t.ccclass},function(t){c=t.NodeHelper},function(t){l=t.Maths},function(t){h=t.Move},function(t){d=t.Vector3},function(t){u=t.EBattleLevelType,p=t.EBattleDirType,f=t.EBattleSizeType,v=t.CCubeSize,b=t.CCubeSizeAddV3,m=t.CBattleDirAngle,y=t.EBattleEntityType,g=t.CBattleDirXYZ,S=t.CBattleDirV3,R=t.CCubeColliderDis},function(t){M=t._battle},function(t){E=t.BattleBaseEntity},function(t){A=t.AudioMgr},function(t){C=t.TimerMgr},function(t){B=t.AABB},function(t){D=t.Vector2},function(t){x=t.UIMgr}],execute:function(){var _;a._RF.push({},"d85ccCiRDBJZaAgixXWxZNM","BattleCubeEntity",void 0);var w=new d(0,90,0),T=new d(0,0,0),k=new d(0,0,0),U=new d(0,0,0),O=new d(1,1,1),N=new d(0,0,0),P=new B,I=new n;t("BattleCubeEntity",r("BattleCubeEntity")(_=function(t){function a(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).entityType=y.Cube,e.isPut=!0,e.isUpdateStateMackine=!0,e.isDestroy=!1,e.index=-1,e.delayShow=-1,e.isAnim=!1,e.data=null,e._move=new h,e.isScaleAnim=!1,e.isRotateAnim=!1,e.toRotate=new d,e.meshRenders=null,e.scaleRatio=0,e}e(a,t);var n=a.prototype;return n.isMoving=function(){return!1},n.onStateEnterLoad=function(){t.prototype.onStateEnterLoad.call(this),this.data=M.datas[this.index],this.meshRenders=this.getComponentsInChildren(s),this.setScaleNum(0,!1),this._move.init(this.node,!1,10),C.deleteDirtyMark("BattleCubeEntity"+this.index)},n.onStateEnterRun=function(){var e=this;if(t.prototype.onStateEnterRun.call(this),this.isRotateAnim=!1,this.scene.updateCubeSkin(this.data,this.meshRenders),M.levelType==u.shape)for(var a,n=-1,s=i(this.meshRenders);!(a=s()).done;){var o=a.value;n++;var r=M.shapeData.curColors[this.index],h=M.shapeData.matMap[r];n==p.down||n==p.up?o.setMaterial(h.color,0):o.setMaterial(h.img,0)}c.setRotate(this.node.children[0],d.ZERO,!1),this.data.type==f["2*2"]&&(this.data.aabb.halfExtents.y!=v.y+b.y||this.data.dir!=p.back&&this.data.dir!=p.front||c.setRotate(this.node.children[0],w,!1)),this.isScaleAnim=!1,this.setRotate(m[this.data.dir],!1),this.isAnim?(this.scaleRatio=l.minToMax(.03,.06,!1),this.setScaleNum(.3,!1),M.getDirMul(N,this.data.dir,8,!0),N.addSelf(this.data.aabb.center),this.setPosition(N,!1),this._move.setRunData(1,(function(t){t.target.set(e.data.aabb.center),t.speed=20})),this.scheduleOnce((function(){e._move.run(),e.isScaleAnim=!0}),this.delayShow)):(this.setScaleNum(1,!1),this.setPosition(this.data.aabb.center,!1))},n.onStateUpdateRun=function(){t.prototype.onStateUpdateRun.call(this),this._move.onUpdate(),this.isScaleAnim&&d.equals(this.data.aabb.center,this.getPosition(!1),.8)&&this.lerpScaleTarget(O,this.scaleRatio,!1)&&(this.setScaleNum(1,!1),this.isScaleAnim=!1),this.isRotateAnim&&c.lerpRotateTarget(this.node,this.toRotate,.1,!1)&&(this.isRotateAnim=!1)},n.onStateUpdateOver=function(){t.prototype.onStateUpdateOver.call(this),this._move.onUpdate()},n.onStateEnterOver=function(){var e=this;t.prototype.onStateEnterOver.call(this,!1),A.play("battle/audio/remove"),M.getDataCount()<=1&&(M.isRun=!1),M.removeData(this.index),this._move.setRunData(1,(function(t){M.getDirMul(t.target,e.data.dir,20),t.target.addSelf(e.data.aabb.center),t.speedMul=3})),this._move.run((function(){e.scene.entityMgr.remove(e)}))},n.onStateEnterExit=function(e){this._move.clear(),t.prototype.onStateEnterExit.call(this),M.isRun||1==this.scene.entityMgr.entitesType.get(y.Cube).size&&M.hasDataZero()&&M._runComplete.run(!0)},n.dis=function(t){P.set(this.data.aabb.center,this.data.aabb.halfExtents),P.halfExtents.subSelf(b),T.set(B.ptPointAabb(P,t.data.aabb.center)),P.set(t.data.aabb.center,t.data.aabb.halfExtents),P.halfExtents.subSelf(b),k.set(B.ptPointAabb(P,this.data.aabb.center));var e=g[this.data.dir].cur,i=Math.abs(T[e]-k[e]);return i},n.colliderAnim=function(t,e,i){var a=this;this._move.setRunData(2,(function(n,s){if(n.target.set(a.data.aabb.center),0==s){var o=g[t.data.dir].cur;n.target[o]+=S[t.data.dir][o]*i,n.speedMul=e}else n.speedMul=1.5})),this._move.run()},n.dirBack=function(){this.toRotate.set(m[this.data.dir]),this.isRotateAnim=!0},n.randomRemove=function(){this.entityStateMackine.change(o.Over)},n.click=function(t){var e=this;if(void 0===t&&(t=!1),this.scene.isIndexShow)M.dirBack(this.index);else if(M.levelType==u.level&&(M.getDataCount()<=1&&M.step.cur<=1&&(M.isRun=!1),M.step.sub(1)),t)this.entityStateMackine.change(o.Over);else{var i=M.getFront(this.index);if(i){var a=this.dis(i.entity);0==a&&this.scene.colliderAnim(this.index),this._move.setRunData(2,(function(t,i){if(t.target.set(e.data.aabb.center),0==i){var n=g[e.data.dir].cur;t.target[n]+=S[e.data.dir][n]*R,a>0&&(M.getDirMul(U,e.data.dir,a),t.target[n]+=U[n],t.onEnd=function(){e.scene.colliderAnim(e.index)}),t.speedMul=1}else t.speedMul=1.5})),this._move.run((function(){M.isRun||M._runComplete.run(!1)}))}else this.entityStateMackine.change(o.Over)}},n.getUIPosition=function(t,e){void 0===e&&(e=this.data.aabb.center),I.set(e.x,e.y,e.z),this.scene.cCamera_scene.convertToUINode(I,x.getZeroWorldPointNode(),I),D.set(t,I)},a}(E))||_);a._RF.pop()}}}));

System.register("chunks:///_virtual/BattleCustomCube1x1Entity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DirectorHelper.ts","./BattleDefine.ts","./InstanceExport.ts","./BattleBaseEntity.ts"],(function(t){"use strict";var e,n,s,i,a,o,r,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,s=t.MeshRenderer},function(t){i=t.ccclass},function(t){a=t.EBattleDirType,o=t.EBattleEntityType},function(t){r=t._battleCustom},function(t){u=t.BattleBaseEntity}],execute:function(){var c;n._RF.push({},"5c67ehsh1xIfJJQBhgwua69","BattleCustomCube1x1Entity",void 0);t("BattleCustomCube1x1Entity",i("BattleCustomCube1x1Entity")(c=function(t){function n(){for(var e,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))||this).entityType=o.CustomCube1x1,e.isPut=!0,e.isUpdateStateMackine=!0,e.isDestroy=!1,e.index=-1,e.data=null,e.meshRenders=null,e}e(n,t);var i=n.prototype;return i.isMoving=function(){return!1},i.onStateEnterLoad=function(){t.prototype.onStateEnterLoad.call(this),this.data=r.data.datas[this.index],this.meshRenders=this.getComponentsInChildren(s)},i.onStateEnterRun=function(){t.prototype.onStateEnterRun.call(this),this.scene.updateCubeSkin(this.data,this.meshRenders),this.setScaleNum(1,!1),this.setPosition(this.data.aabb.center,!1)},i.click=function(t){if(r.data.state){var e=this.scene.rayMeshs(t,this.meshRenders);if(-1!==e){var n=this.meshRenders[e].node.name,s=a[n];r.createCube(this.data,s)}}else r.remove(this.index)},n}(u))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleCustomDownEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DirectorHelper.ts","./Vector3.ts","./BattleDefine.ts","./InstanceExport.ts","./BattleBaseEntity.ts","./AABB.ts"],(function(t){"use strict";var e,n,s,i,a,o,r,c,u,l,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,s=t.Color,i=t.MeshRenderer},function(t){a=t.ccclass},function(t){o=t.Vector3},function(t){r=t.EBattleDirType,c=t.EBattleEntityType},function(t){u=t._battleCustom},function(t){l=t.BattleBaseEntity},function(t){h=t.AABB}],execute:function(){var d;n._RF.push({},"70a02lUjKFDbZWURHIk5iJ9","BattleCustomDownEntity",void 0);new o(0,90,0),new o(0,0,0),new o(0,0,0),new o(0,0,0),new o(1,1,1),new o(0,0,0),new o(0,0,0),new o(0,0,0),new s(255,255,255),new s(180,180,180),new s,new h,t("BattleCustomDownEntity",a("BattleCustomDownEntity")(d=function(t){function n(){for(var e,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))||this).entityType=c.CustomDown,e.isPut=!0,e.isUpdateStateMackine=!0,e.isDestroy=!1,e.index=-1,e.data=null,e.meshRender=null,e.meshDownRender=null,e}e(n,t);var s=n.prototype;return s.isMoving=function(){return!1},s.onStateEnterLoad=function(){t.prototype.onStateEnterLoad.call(this),this.data=u.data.downs[this.index];var e=this.getComponentsInChildren(i);this.meshRender=e[0],this.meshDownRender=e[1]},s.onStateEnterRun=function(){t.prototype.onStateEnterRun.call(this),this.setPosition(this.data.aabb.center,!1)},s.click=function(t){if(u.data.state){var e=this.scene.rayMesh(t,this.meshRender),n=this.scene.rayMesh(t,this.meshDownRender);0==n&&0==e?this.downRay(t):0!=n?0!=e&&e<=n?u.createCube(this.data,r.up):this.downRay(t):e>0&&u.createCube(this.data,r.up)}},s.downRay=function(t){var e=this.scene.rayByData(t,u.data.datas);e&&e.customCube1x1Entity&&e.customCube1x1Entity.click(t)},n}(l))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleCustomEditorSuccessUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DirectorHelper.ts","./BaseUI.ts","./UIDefine.ts","./PlatformDefine.ts","./PlatformMgr.ts","./InstanceExport.ts","./AudioMgr.ts"],(function(t){"use strict";var e,o,n,c,s,i,r,u,a,l,f;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy},function(t){n=t.ccclass},function(t){c=t.BaseUI},function(t){s=t.EUILayer},function(t){i=t.EBottomAdType,r=t.EPlatformType,u=t.EBlockOnceAdType},function(t){a=t.PlatformMgr},function(t){l=t._battleCustom},function(t){f=t.AudioMgr}],execute:function(){var p;o._RF.push({},"f5200k8czRE4KZQFa5OjGI9","BattleCustomEditorSuccessUI",void 0);t("BattleCustomEditorSuccessUI",n("BattleCustomEditorSuccessUI")(p=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))||this).layerType=s.Notice,e.blockOnceAdType=u.Show,e.openByAudioUrls=["battle/audio/success"],e}e(o,t);var n=o.prototype;return n.onCreate=function(){switch(a.type){case r.WECHAT:this.bottomAdType=i.Native;break;default:this.bottomAdType=i.Banner}},n.onOpen=function(){f.play(this.audioUrls[0])},n.onClickAShare=function(){l.shareMap(l.editorIndex)},n.onClickBack=function(){this.closeUI(),l.editorRun(l.editorIndex)},o}(c))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/BattleCustomEditorUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DirectorHelper.ts","./PlatformDefine.ts","./PlatformMgr.ts","./InstanceExport.ts","./SceneBaseUI.ts","./GameDefine.ts","./UIMgr.ts"],(function(t){"use strict";var e,n,o,i,a,s,c,u,r,l,d,p;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.ccclass},function(t){i=t.EBottomAdType,a=t.EPlatformType,s=t.EBlockOnceAdType},function(t){c=t.PlatformMgr},function(t){u=t._battleCustom,r=t._main},function(t){l=t.SceneBaseUI},function(t){d=t.CUseData},function(t){p=t.UIMgr}],execute:function(){var f;n._RF.push({},"3f81e3TBElPspyG9C3WGeq8","BattleCustomEditorUI",void 0);t("BattleCustomEditorUI",o("BattleCustomEditorUI")(f=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).blockOnceAdType=s.None,e.cLabel_step=null,e.cLabel_title=null,e}e(n,t);var o=n.prototype;return o.onCreate=function(){switch(c.type){case a.WECHAT:this.bottomAdType=i.Native;break;default:this.bottomAdType=i.Banner}this.addEvent(u.EventType.MAP_DATA_CHANGE,this.updateStep,this,u)},o.onOpen=function(){this.cLabel_title.string="我的地图"+(u.editorIndex+1),this.updateStep(),this.updateCubeState()},o.updateStep=function(){this.cLabel_step.string=u.getStepSub(u.editorIndex)+""},o.onClickPause=function(){p.open(d.settingUrl)},o.onClickCubeState=function(){u.data.state=!u.data.state,this.updateCubeState()},o.updateCubeState=function(){this.SwitchSpriteCC.index=u.data.state?0:1},o.onClickAddStep=function(){r.showVideo("自定义关卡加步数",(function(){u.addMapCubeCount(u.editorIndex)}))},o.onClickRun=function(){u.run(u.getMap(u.editorIndex).data,!1)},o.onClickAShare=function(){u.shareMap(u.editorIndex)},n}(l))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleCustomFriendUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DirectorHelper.ts","./BaseUI.ts","./UIDefine.ts","./PlatformDefine.ts","./PlatformMgr.ts","./InstanceExport.ts"],(function(t){"use strict";var e,n,o,r,c,s,i,a,u,l;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.ccclass},function(t){r=t.BaseUI},function(t){c=t.EUILayer},function(t){s=t.EBottomAdType,i=t.EPlatformType,a=t.EBlockOnceAdType},function(t){u=t.PlatformMgr},function(t){l=t._battleCustom}],execute:function(){var f;n._RF.push({},"4d878wNM/xGEZy/jXzq2Vkg","BattleCustomFriendUI",void 0);t("BattleCustomFriendUI",o("BattleCustomFriendUI")(f=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).layerType=c.ItemUp,e.blockOnceAdType=a.Show,e._openData=null,e}e(n,t);var o=n.prototype;return o.onCreate=function(){switch(u.type){case i.WECHAT:this.bottomAdType=s.Native;break;default:this.bottomAdType=s.Banner}},o.onClickBtn=function(){this.closeUI(),l.run(this._openData,!0)},n}(r))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleCustomMapUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DirectorHelper.ts","./BaseUI.ts","./UIDefine.ts","./PlatformDefine.ts","./PlatformMgr.ts","./InstanceExport.ts","./BattleDefine.ts","./UIMgr.ts","./BattleCustomMapUIItem.ts","./GameDefine.ts"],(function(t){"use strict";var e,n,o,i,a,c,s,u,r,l,p,f,d,C,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.ccclass},function(t){i=t.BaseUI},function(t){a=t.EUILayer},function(t){c=t.EBottomAdType,s=t.EPlatformType,u=t.EBlockOnceAdType},function(t){r=t.PlatformMgr},function(t){l=t._battleCustom,p=t._main,f=t._battle},function(t){d=t.CBattleCustomDefaultMapCount},function(t){C=t.UIMgr},function(t){h=t.BattleCustomMapUIItem},null],execute:function(){var m;n._RF.push({},"fa8b21dhsdF27IxsjcylbS7","BattleCustomMapUI",void 0);t("BattleCustomMapUI",o("BattleCustomMapUI")(m=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).layerType=a.Panel,e.blockOnceAdType=u.None,e.cLabel_video_count=null,e.cVideoIcon=null,e}e(n,t);var o=n.prototype;return o.onCreate=function(){switch(r.type){case s.WECHAT:this.bottomAdType=c.Native;break;default:this.bottomAdType=c.Banner}this.addEvent(l.EventType.MAP_COUNT_CHANGE,this.onOpen,this,l),this.SwitchSpriteCC.index=0},o.onOpen=function(){var t=l.getMapCount();this.cLabel_video_count.string=t+"/"+d,this.ListCC.render(t,h,(function(t,e,n){t.init(n)})),this.cVideoIcon.active=t>=d},o.onClickVideo=function(){var t=this,e=function(){t.closeUI(),C.tip("新建地图成功");var e=l.addMap();l.editorRun(e)};l.getMapCount()>=d?p.showVideo("自定义地图",e):e()},o.onClickExit=function(){this.closeUI(),f.exit(!0)},n}(i))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleCustomMapUIItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./DirectorHelper.ts","./InstanceExport.ts","./Times.ts"],(function(t){"use strict";var e,n,i,a,c,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.BaseComponent},function(t){a=t.ccclass},function(t){c=t._battleCustom},function(t){o=t.Times}],execute:function(){var s;n._RF.push({},"633dcO3oExH14gqn+NPEyDq","BattleCustomMapUIItem",void 0);t("BattleCustomMapUIItem",a("BattleCustomMapUIItem")(s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).cLabel_time=null,e.cLabel_count=null,e.cAShare=null,e.index=-1,e}e(n,t);var i=n.prototype;return i.init=function(t){this.index=t;var e=c.getMap(this.index);this.cLabel_count.string=this.index+1+"",this.cLabel_time.string=o.toLocaleString(1e3*e.createTime),0!=c.deDataByCreateCount(e.data.p)?this.cAShare.active=!0:this.cAShare.active=!1},i.onClick=function(){c.editorRun(this.index)},i.onClickAShare=function(){c.shareMap(this.index)},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleEntityMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseEntityMgr.ts","./EntityDefine.ts","./BattleDefine.ts","./InstanceExport.ts","./TimerMgr.ts"],(function(t){"use strict";var e,n,i,a,c,r,o,s,u,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t.Vec2},function(t){a=t.BaseEntityMgr},function(t){c=t.EEntityState},function(t){r=t.CBattleResoucesLoadPriority,o=t.CBattleCustomDownEntityUrl,s=t.CBattleCustomCube1x1EntityUrl},function(t){u=t._battle},function(t){h=t.TimerMgr}],execute:function(){n._RF.push({},"f03bfaj0lhOiZKDnlk/SDkH","BattleEntityMgr",void 0);new i,t("BattleEntityMgr",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.getQueueResoucesPriority=function(){return r},i.createCube=function(t,e,n){var i=u.getCubeUrl(t),a=this.create(i);return a.index=t,a.isAnim=e,a.delayShow=n,a.entityStateMackine.change(c.Load),this.scene.cContent.addChild(a.node),a.entityStateMackine.change(c.Reset),a.entityStateMackine.change(c.Run),a},i.createPreCube=function(t){var e=this,n=this.create(t,!1);n.setPositionX(-1e7,!1),this.scene.cContent.addChild(n.node),h.callLater(this,(function(){e.Pool.put(n.node)}))},i.createCustomDown=function(t){var e=this.create(o);return e.index=t,e.entityStateMackine.change(c.Load),this.scene.cContent.addChild(e.node),e.entityStateMackine.change(c.Reset),e.entityStateMackine.change(c.Run),e},i.createCustomCube1x1=function(t){var e=this.create(s);return e.index=t,e.entityStateMackine.change(c.Load),this.scene.cContent.addChild(e.node),e.entityStateMackine.change(c.Reset),e.entityStateMackine.change(c.Run),e},n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleFailUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DirectorHelper.ts","./PlatformMgr.ts","./BaseUI.ts","./UIDefine.ts","./UIMgr.ts","./Times.ts","./BattleDefine.ts","./InstanceExport.ts","./PlatformDefine.ts","./ToDayMaxRecode.ts","./AudioMgr.ts"],(function(e){"use strict";var t,o,n,i,c,a,s,l,r,u,p,f,v,y,d,h,T,m;return{setters:[function(e){t=e.inheritsLoose,o=e.createClass},function(e){n=e.cclegacy},function(e){i=e.ccclass},function(e){c=e.PlatformMgr},function(e){a=e.BaseUI},function(e){s=e.EUILayer},function(e){l=e.UIMgr},function(e){r=e.Times},function(e){u=e.EBattleLevelType},function(e){p=e._battle,f=e._main,v=e._language},function(e){y=e.EBottomAdType,d=e.EPlatformType,h=e.EBlockOnceAdType},function(e){T=e.ToDayMaxRecode},function(e){m=e.AudioMgr}],execute:function(){var I;n._RF.push({},"b3c2aRI6OlORoGDo/qf+eRY","BattleFailUI",void 0);e("BattleFailUI",i("BattleFailUI")(I=function(e){function n(){for(var t,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).layerType=s.Notice,t.blockOnceAdType=h.None,t.openByAudioUrls=["battle/audio/fail"],t.cRevive=null,t.cReviveDec=null,t.cReviveDec2=null,t.openTime=-1,t}t(n,e);var i=n.prototype;return i.onCreate=function(){switch(c.type){case d.VIVO:case d.WECHAT:this.bottomAdType=y.Native;break;default:this.bottomAdType=y.Banner}},i.onOpen=function(){c.type!=d.WECHAT&&c.Interstitial.show(),p.report("game_lose",{time:r.second()}),this.openTime=r.second(),m.play(this.audioUrls[0]);var e=p.levelType==u.level;this.cRevive.active=e,this.cReviveDec.active=e,this.cReviveDec2.active=e,this.blockOnceAdType=e?h.None:h.Show,p.levelType!=u.toDay?this.toDayRecord.node.active=!1:this.toDayRecord.node.active=!0},i.onClickIndex=function(){p.report("lose_back_home"),this.closeUI(),p.exit()},i.onClickRevive=function(){var e=this;f.showVideo("复活",(function(){p.report("lose_resurrection"),l.tip(v.get(800001)),e.closeUI(),p.revive(r.second()-e.openTime)}))},o(n,[{key:"toDayRecord",get:function(){return this.getCacheComponent(T)}}]),n}(a))||I);n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleLevelSelectUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DirectorHelper.ts","./BaseUI.ts","./UIDefine.ts","./InstanceExport.ts","./BattleLevelSelectUIItems.ts","./LevelHelper.ts","./PlatformDefine.ts"],(function(t){"use strict";var e,n,o,l,i,s,a,c,u,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.ccclass},function(t){l=t.BaseUI},function(t){i=t.EUILayer},function(t){s=t._battle},function(t){a=t.BattleLevelSelectUIItems},function(t){c=t.LevelHelper},function(t){u=t.EBottomAdType,r=t.EBlockOnceAdType}],execute:function(){var h;n._RF.push({},"c119aNUSEJHsre5TyWPtwOF","BattleLevelSelectUI",void 0);t("BattleLevelSelectUI",o("BattleLevelSelectUI")(h=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))||this).layerType=i.Panel,e.bottomAdType=u.None,e.blockOnceAdType=r.None,e.allCount=-1,e.colCount=-1,e.endCount=-1,e._openData=null,e}e(n,t);var o=n.prototype;return o.onCreate=function(){var t=this;this.addEvent(c.EventType.CHNAGE,this.updateView,this,(function(){return t._openData.level})),this.ListRollCC.itemDataRender=function(e,n,o){n.getComponent(a).init(4*e,e==t.colCount-1?t.endCount:4,t)}},o.onOpen=function(){var t=this,e=this._openData.level.cur;this.allCount=Math.max(this._openData.add?e+1e3:e,this._openData.configLength),this.colCount=Math.ceil(this.allCount/4),this.endCount=this.allCount%4,this.ListRollCC.setItemDatas(this.colCount),this.scheduleOnceCover((function(){t.ListRollCC.showIndex(Math.floor(e/4),-300)}))},o.updateView=function(){this.onOpen(),this.ListRollCC.updateItemDatas()},o.onClickExit=function(){this.closeUI(),s.exit(!0)},n}(l))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleLevelSelectUIItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./DirectorHelper.ts","./UIMgr.ts","./InstanceExport.ts"],(function(e){"use strict";var t,l,n,i,s,o,r;return{setters:[function(e){t=e.inheritsLoose},function(e){l=e.cclegacy},function(e){n=e.BaseComponent},function(e){i=e.ccclass},function(e){s=e.UIMgr},function(e){o=e._battle,r=e._language}],execute:function(){var c;l._RF.push({},"0719fUdggpICIJjyjujm6cd","BattleLevelSelectUIItem",void 0);e("BattleLevelSelectUIItem",i("BattleLevelSelectUIItem")(c=function(e){function l(){for(var t,l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).levelId=-1,t.ui=null,t}t(l,e);var n=l.prototype;return n.init=function(e,t){this.levelId=e,this.ui=t,this.Label.string=this.levelId+"";var l=t._openData.level.cur;this.levelId==l?this.ControllerCC.index=1:this.levelId<l?this.ControllerCC.index=2:this.ControllerCC.index=0},n.onClick=function(){switch(this.ControllerCC.index){case 1:this.ui._openData.level==o.level?o.levelRun():o.shapeRun();break;case 0:s.tip(r.get(800002));break;case 2:this.ui._openData.level==o.level?o.levelRun(this.levelId):o.shapeRun(this.levelId)}},l}(n))||c);l._RF.pop()}}}));

System.register("chunks:///_virtual/BattleLevelSelectUIItems.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./DirectorHelper.ts","./BattleLevelSelectUIItem.ts"],(function(e){"use strict";var t,n,c,l,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){c=e.BaseComponent},function(e){l=e.ccclass},function(e){o=e.BattleLevelSelectUIItem}],execute:function(){var i;n._RF.push({},"ab78eJ2CH1BzoG/TzKEA5Ur","BattleLevelSelectUIItems",void 0);e("BattleLevelSelectUIItems",l("BattleLevelSelectUIItems")(i=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.init=function(e,t,n){this.CreatePrefabToEditorCC.render(t,o,(function(t,c,l){t.init(e+l+1,n)}))},n}(c))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/BattlePropGetUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DirectorHelper.ts","./PlatformMgr.ts","./BaseUI.ts","./UIDefine.ts","./InstanceExport.ts","./UIMgr.ts","./PlatformDefine.ts"],(function(t){"use strict";var e,i,o,r,n,a,s,p,c,l,u,d,h,f;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){o=t.ccclass},function(t){r=t.PlatformMgr},function(t){n=t.BaseUI},function(t){a=t.EUILayer},function(t){s=t._prop,p=t._battle,c=t._main,l=t._language},function(t){u=t.UIMgr},function(t){d=t.EBottomAdType,h=t.EPlatformType,f=t.EBlockOnceAdType}],execute:function(){var _;i._RF.push({},"f840erSSFpEhrGE+I3ymcz5","BattlePropGetUI",void 0);var C=["battle/texture/prop/chongzhi1","battle/texture/prop/fanxiang1","battle/texture/prop/xiaochu1","battle/texture/prop/jiashi1"];t("BattlePropGetUI",o("BattlePropGetUI")(_=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).layerType=a.Notice,e.blockOnceAdType=f.None,e.cSpriteLoaderCC_title=null,e.cSwitchChildrenCC_icon=null,e.cSwitchChildrenCC_tip=null,e.cLabel_useCount=null,e.cSwitchSpriteCC_video=null,e._openData=null,e.isVideo=!1,e.isReport=!1,e}e(i,t);var o=i.prototype;return o.onCreate=function(){switch(r.type){case h.OPPO:case h.WECHAT:this.bottomAdType=d.Native;break;default:this.bottomAdType=d.Banner}},o.onOpen=function(){var t,e=((t={})[s.time.id]="countdown_end_extra",t[s.remove.id]="game_props_eliminate",t[s.back.id]="game_props_reverse",t[s.reset.id]="game_props_refresh",t);this.isReport||(p.report(e[this._openData.id]),this.isReport=!0),this.isVideo=!1,p.pause(!1),this.updateView()},o.onClose=function(){this.isReport=!1,p.resume(!1),p.propClose(this._openData.id,this.isVideo)},o.updateView=function(){var t=this._openData.id,e=p.propMaxCount[t];this.cLabel_useCount.string=p.propUseCount[t]+"/"+e,this.cSwitchChildrenCC_icon.index=t-1,this.cSwitchChildrenCC_tip.index=t-1,this.cSwitchSpriteCC_video.index=p.propHasShare(t)?1:0,this.cSpriteLoaderCC_title.setSpriteFrameUrl(C[t-1])},o.onClickVideo=function(){var t,e=this,i=this._openData.id,o=((t={})[s.time.id]="加时间",t[s.remove.id]="消除",t[s.back.id]="翻转",t[s.reset.id]="刷新",t);c.showVideo(o[i]+"道具",(function(){e.isVideo=!0,u.tip(l.get(800001)),e.closeUI(),p.addProp(i)}),p.propHasShare(i),(function(){p.addPropBuyShare(i),e.updateView()}))},i}(n))||_);i._RF.pop()}}}));

System.register("chunks:///_virtual/BattleRunUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DirectorHelper.ts","./PropHelper.ts","./TimerMgr.ts","./UIDefine.ts","./Times.ts","./BattleDefine.ts","./InstanceExport.ts","./UIMgr.ts","./PlatformDefine.ts","./PlatformMgr.ts","./AudioMgr.ts","./SceneBaseUI.ts","./GameDefine.ts"],(function(e){"use strict";var t,i,n,s,l,c,o,a,r,u,p,h,v,f,m,C,_,A,L,b,g;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e.Color,s=e.LabelOutline},function(e){l=e.ccclass},function(e){c=e.PropHelper},function(e){o=e.TimerMgr},function(e){a=e.EUIState},function(e){r=e.Times},function(e){u=e.EBattleLevelType},function(e){p=e._battle,h=e._battleCustom,v=e._language},function(e){f=e.UIMgr},function(e){m=e.EBottomAdType,C=e.EPlatformType,_=e.EBlockOnceAdType},function(e){A=e.PlatformMgr},function(e){L=e.AudioMgr},function(e){b=e.SceneBaseUI},function(e){g=e.CUseData}],execute:function(){var y;i._RF.push({},"8235et9gshDCo/47fpZdcTi","BattleRunUI",void 0);var S=[(new n).fromHEX("1ea9a3"),(new n).fromHEX("a581ff"),n.BLACK.clone()];e("BattleRunUI",l("BattleRunUI")(y=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).blockOnceAdType=_.Show,t.cLabel_time=null,t.cSprite_time=null,t.cLabel_step=null,t.cLabel_step2=null,t.cLabel_level=null,t.cAtime=null,t.cAstep=null,t.cSwitchSpriteCC_title=null,t.cShape=null,t.cCustom=null,t.levelOutline=null,t}t(i,e);var n=i.prototype;return n.onCreate=function(){var e=this;switch(this.levelOutline=this.cLabel_level.getComponent(s),A.type){case C.WECHAT:this.bottomAdType=m.Native;break;default:this.bottomAdType=m.Banner}this.addEvent(c.EventType.CHANGE,this.onEventStepCount,this,p.step),this.addEvent(p.EventType.DURATION_CHANGE,this.onLoopDownCount,this,p),this.addEvent(p.EventType.PLAY_ANIM,(function(){L.play("battle/audio/magic"),e.AnimtorByTweenCC.setOpacity(1),e.AnimtorByTweenCC.play()}),this,p)},n.onOpen=function(){switch(o.clear(this,this.onLoopDownCount),p.levelType){case u.level:this.cLabel_level.node.active=!0,this.cAstep&&(this.cAstep.active=!0),this.cAtime&&(this.cAtime.active=!1),this.onEventLevel(),this.onEventStepCount();break;case u.toDay:this.cLabel_level.node.active=!1,this.cAstep&&(this.cAstep.active=!1),this.cAtime&&(this.cAtime.active=!0),o.loop(this,this.onLoopDownCount,1,-1,-1);break;case u.shape:this.cLabel_level.node.active=!0,this.cAstep&&(this.cAstep.active=!1),this.cAtime&&(this.cAtime.active=!1),this.onEventLevel();break;case u.custom:this.cLabel_level.node.active=!1,this.cAstep&&(this.cAstep.active=!1),this.cAtime&&(this.cAtime.active=!1)}this.AnimtorByTweenCC.setOpacity(0),this.cSwitchSpriteCC_title&&this.cShape&&this.cCustom&&(this.cSwitchSpriteCC_title.node.active=!1,this.levelOutline.color=S[2])},n.onClickSwitchSpriteCC_title=function(){switch(p.levelType){case u.level:p.toDayRun();break;case u.toDay:p.levelRun()}},n.onClickASkin=function(){f.open(g.skinUrl)},n.onClickPause=function(){p.report("pause_view_show"),f.open(g.settingUrl)},n.onClickCustom=function(){h.enter()},n.onClickShape=function(){p.shapeRun()},n.onEventLevel=function(){switch(p.levelType){case u.level:this.cLabel_level.string=v.get(800021).replace("{0}",p.curLevel+"");break;case u.shape:this.cLabel_level.string=v.get(800021).replace("{0}",p.curShapeLevel+"")}},n.onLoopDownCount=function(){var e=f.getModule(g.settingUrl).state;if(e!=a.Open&&e!=a.Load&&(e=f.getModule(g.BattleSuccessToDayUrl).state)!=a.Open&&e!=a.Load){var t=1e3*p.intervalTimeCountDown.sub;this.cLabel_time&&(this.cLabel_time.string=r.numHourCountDown(t)),this.cSprite_time&&(this.cSprite_time.fillRange=1-p.intervalTimeCountDown.ratio,this.cLabel_step2&&(this.cLabel_step2.string="倒计时"+r.chinaHourCountDown(t)))}},n.onEventStepCount=function(){var e=p.step.cur;this.cLabel_step&&(this.cLabel_step.string=e+""),this.cLabel_step2&&(this.cLabel_step2.string="剩余步数："+e,this.cSprite_time&&(this.cSprite_time.fillRange=e/p.levelStepInit))},i}(b))||y);i._RF.pop()}}}));

System.register("chunks:///_virtual/BattleRunUIItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./DirectorHelper.ts","./InstanceExport.ts","./UIMgr.ts"],(function(t){"use strict";var n,e,i,o,r,s,a,c,p,u,l,h,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy},function(t){a=t.BaseComponent},function(t){c=t.ccclass,p=t.property},function(t){u=t._battle,l=t._language,h=t._prop},function(t){f=t.UIMgr}],execute:function(){var g,d,I,y,v;s._RF.push({},"08b68TS4pdAbbwVq4FdAVIr","BattleRunUIItem",void 0);t("BattleRunUIItem",(g=c("BattleRunUIItem"),d=p({displayName:"道具id"}),g((v=n((y=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return n=t.call.apply(t,[this].concat(r))||this,i(n,"configID",v,o(n)),n.cAAdd=null,n}e(n,t);var s=n.prototype;return s.onLoad=function(){t.prototype.onLoad.call(this),this.addEvent(u.EventType.PROP_CHANGE,this.onEventPropChange,this,u)},s.onEnable=function(){t.prototype.onEnable.call(this),this.onEventPropChange()},s.onClick=function(){this.isMax?f.tip(l.get(800003)):this.prop.cur>0?u.useProp(this.prop.id):h.openGetUI(this.prop)},s.onEventPropChange=function(){var t=this.prop.cur;t>0&&!this.isMax?(this.cAAdd.active=!0,this.ButtonCC.isPlayBreathe=!0,this.Label.string=""+t):(this.cAAdd.active=!1,this.ButtonCC.isPlayBreathe=!1)},r(n,[{key:"prop",get:function(){return h.singles.get(this.configID)}},{key:"isMax",get:function(){return u.propUseCount[this.configID]>=u.propMaxCount[this.configID]}}]),n}(a)).prototype,"configID",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),I=y))||I));s._RF.pop()}}}));

System.register("chunks:///_virtual/BattleScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./OrbitControls.ts","./EntityDefine.ts","./DirectorHelper.ts","./NodeHelper.ts","./BaseScene.ts","./BattleDefine.ts","./InstanceExport.ts","./BattleEntityMgr.ts","./Sets.ts","./EventHandlerCC.ts","./TimerMgr.ts","./UIMgr.ts","./Vector3.ts","./GameDefine.ts","./ResoucesMgr.ts","./UIDefine.ts"],(function(e){"use strict";var t,n,i,s,o,a,r,c,l,u,h,f,d,v,y,C,p,g,m,w,I,E,b,M,S,U,D,R,T,x,_,N,k;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose,i=e.assertThisInitialized},function(e){s=e.cclegacy,o=e.Vec2,a=e.geometry,r=e.Vec3,c=e.Texture2D},function(e){l=e._config_},function(e){u=e.OrbitControls},function(e){h=e.EEntityState},function(e){f=e.ccclass},function(e){d=e.NodeHelper},function(e){v=e.BaseScene},function(e){y=e.EBattleDirType,C=e.EBattleLevelType,p=e.EBattleEntityType,g=e.CBattleSizeTypeImgNames,m=e.CCubeColliderDis},function(e){w=e._battle,I=e._guide,E=e._battleCustom,b=e._prop},function(e){M=e.BattleEntityMgr},function(e){S=e.Sets},function(e){U=e.EventHandlerCC},function(e){D=e.TimerMgr},function(e){R=e.UIMgr},function(e){T=e.Vector3},function(e){x=e.CUseData,_=e.CUseDataIndexUrl},function(e){N=e.ResoucesMgr},function(e){k=e.EUIState}],execute:function(){var B,P;s._RF.push({},"756d21u8oFOCI3wqef7VPf1","BattleScene",void 0);var L=new o,O=new a.Ray,A=new T,F=(new r,new r,new r,new r,new r,{mode:a.ERaycastMode.CLOSEST,doubleSided:!0,distance:300});(B={})[y.back]=new a.Plane,B[y.down]=new a.Plane,B[y.front]=new a.Plane,B[y.left]=new a.Plane,B[y.right]=new a.Plane,B[y.up]=new a.Plane,e("BattleScene",f("BattleScene")(P=function(e){function s(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this).entityMgr=new M(i(t)),t.cContent=null,t.cCamera_scene=null,t.cASceneOffset=null,t.orbitControls=null,t.startEntity=null,t.isRotate=!0,t.isIndexShow=!0,t.isLoadComplete=!1,t.rotateNum=0,t.isNewUserUI=!1,t.isNewUserUI2=!1,t}t(s,e);var o=s.prototype;return o.onCreate=function(){var e=this;this.orbitControls=this.cCamera_scene.getComponent(u),this.addEvent(w.EventType.CHANGE_SKIN_COMPLETE,this.updateSkin,this,w);var t=_;this.addEvent(R.EventType.OPEN,(function(n){n==t&&(e.isIndexShow=!0,e.isRotate=!0,e.rotateNum=0,d.setRotateY(e.cContent,e.rotateNum,!1)),n!==x.BattleRunUIUrl&&"guide/prefab/GuideFingerUI"!==n&&e.closeNewUserFinger()}),this,R),this.addEvent(R.EventType.CLOSE,(function(n){n==t&&(e.isIndexShow=!1)}),this,R),this.isIndexShow=R.getModule(t).state==k.Open},o.onUpdate=function(){this.entityMgr.updateStateMachine(),this.isIndexShow&&this.isRotate&&(this.rotateNum+=10*D.dtDefault,d.setRotateY(this.cContent,this.rotateNum,!1))},o.create=function(e){var t=this;this._createInit();for(var n=[],i=0;i<w.datas.length;i++)w.datas[i]&&n.push(i);w.levelType==C.level&&w.curLevel<=4||S.shuffle(n);var s=100/(1250*w.datas.length),o=.01;e||(s=0,o=0),w.levelType==C.toDay?w.orginSize.equals(A.set(l.Object.user_related_table[3]))&&(s*=.2,o=.002):w.levelType==C.shape&&(s*=3,o=.002);var a=this.getInterval(n.length,o)+.05;console.log("分帧加载时间",a),this.scheduleOnce((function(){t.isLoadComplete=!0,w.levelType==C.level&&w.curLevel<=4&&(t.isNewUserUI2||(t.isNewUserUI2=!0,t.isNewUserUI=!0,I.finger({position:function(){var e=1;switch(w.curLevel){case 3:e=2;break;case 4:e=6}switch(t.entityMgr.entitesType.get(p.Cube).get(e).getUIPosition(L),w.curLevel){case 2:case 3:case 4:L.y-=20}return L},touchStartCloseUI:!1,delay:.7}))),t.isIndexShow||t.checkAllRemove()}),a);for(var r=function(i){var a=n[i],r=w.datas[a],c=t.getInterval(i,o);t.scheduleOnce((function(){r.entity=t.entityMgr.createCube(a,e,i*s)}),c)},c=0;c<n.length;c++)r(c)},o.closeNewUserFinger=function(){this.isNewUserUI&&(this.isNewUserUI=!1,R.close("guide/prefab/GuideFingerUI"))},o.getInterval=function(e,t){return Math.floor(e/1)*t},o.preCube=function(e,t,n){for(var i=this,s=t-this.entityMgr.Pool.pool(e).size(),o=0;o<s;o++)this.scheduleOnce((function(){i.entityMgr.createPreCube(e)}),(o+1)*n)},o.updateSkin=function(){var e=this;this.entityMgr.entitesType.get(p.Cube).forEach((function(t){e.updateCubeSkin(t.data,t.meshRenders)}))},o.touchStart=function(e){this.hasCreate()&&(this.startEntity=this.touchData(e,O,w.datas),this.isRotate=!1)},o.touchMove=function(e){this.orbitControls.onMouseMove(e),this.closeNewUserFinger()},o.mouseWheel=function(e){this.orbitControls.onMouseWheel(e)},o.touchData=function(e,t,n){return e.getLocation(L),this.cCamera_scene.screenPointToRay(L.x,L.y,t),this.rayByData(t,n)},o.touchEnd=function(e){if(this.hasCreate()){this.isIndexShow&&this.scheduleOnceCover(this.onDelayRotate,.8);var t=this.touchData(e,O,w.datas),n=this.startEntity;if(this.startEntity=null,!t)return;if(U.touchIsMoveRun){if(n!=t)return;if(w.getFront(t.entity.index))return;t.entity.click(!0)}else t.entity.click();this.closeNewUserFinger(),this.isIndexShow||this.checkAllRemove()}else if(w.levelType==C.customEditor&&!U.touchIsMoveRun){var i=this.touchData(e,O,E.data.all);i&&(i.customDownEntity?i.customDownEntity.click(O):i.customCube1x1Entity&&i.customCube1x1Entity.click(O))}},o.onDelayRotate=function(){this.isRotate=!0},o.checkAllRemove=function(){if(!(w.getDataCount()<=1)&&this._checkAllRemove()){for(var e,t=[],i=-1,s=n(w.datas);!(e=s()).done;){var o=e.value;i++,o&&o.entity&&o.entity.entityStateMackine.state==h.Run&&t.push(i)}S.shuffle(t);for(var a=-1;void 0!==t[++a]&&(w.dirBack(t[a]),this._checkAllRemove()););}},o._checkAllRemove=function(){for(var e=0;e<w.datas.length;e++){var t=w.datas[e];if(t&&t.entity&&!w.getFront(e))return!1}return!0},o.hasCreate=function(){return w.levelType==C.index||w.levelType==C.level||w.levelType==C.shape||w.levelType==C.toDay||w.levelType==C.custom},o.rayByData=function(e,t,i){var s=null;if(!this.isLoadComplete)return s;for(var o,r=500,c=-1,l=n(t);!(o=l()).done;){var u=o.value;if(c++,(null==i||c!=i)&&u){if(this.hasCreate()){if(!u.entity)continue}else if(!u.customDownEntity&&!u.customCube1x1Entity)continue;w.levelType==C.index&&T.set(u.aabb.center,u.entity.node.worldPosition);var h=a.intersect.rayAABB(e,u.aabb);h>0&&h<r&&(r=h,s=u)}}return s},o.rayMeshs=function(e,t){for(var i,s=300,o=-1,a=-1,r=n(t);!(i=r()).done;){var c=i.value;a++;var l=this.rayMesh(e,c);l&&l<s&&(s=l,o=a)}return o},o.rayMesh=function(e,t){return a.intersect.rayModel(e,t.model,F)},o.colliderAnim=function(e){var t=w.datas[e],n=[];w.getFronts(t,t,n,0);for(var i=m,s=0,o=n;s<o.length;s++){var a=o[s];a.entity.colliderAnim(t.entity,1*Math.pow(.8,a.frontIndex),i*Math.pow(.9,a.frontIndex))}},o.custom=function(){this._createInit(),this.isLoadComplete=!0;for(var e=0;e<E.data.downs.length;e++)E.data.downs[e].customDownEntity=this.entityMgr.createCustomDown(e);for(var t,i=-1,s=n(E.data.datas);!(t=s()).done;){i++,t.value.customCube1x1Entity=this.entityMgr.createCustomCube1x1(i)}},o._createInit=function(){this.isLoadComplete=!1,this.isNewUserUI2=!1,this.isNewUserUI=!1,this.unscheduleAllCallbacks(),D.clearAll(this),d.setRotateY(this.cContent,0,!1),this.entityMgr.clear(!1),this.initCamera()},o.initCamera=function(){d.setRotate(this.cCamera_scene.node,w.cameraRotate,!1),d.setPosition(this.cCamera_scene.node,w.cameraPosition,!1),this.orbitControls.minDistance=w.cameraDis.x,this.orbitControls.maxDistance=w.cameraDis.y;var e=0;w.levelType==C.customEditor&&(e=-2),this.orbitControls.target.set(0,e,0),this.orbitControls.reset()},o.updateCubeSkin=function(e,t){if(w.levelType!=C.shape)for(var i,s=b.arrowSkin.cur,o=l.Object.skin_item[s].scene_url,a=-1,r=n(t);!(i=r()).done;){var u=i.value;a++;var h=g[e.type][a],f=w.converSkinUrl(o,h),d=N.get(f,c);u.sharedMaterial.setProperty("mainTexture",d)}},s}(v))||P);s._RF.pop()}}}));

System.register("chunks:///_virtual/BattleSuccessToDayUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DirectorHelper.ts","./PlatformMgr.ts","./BaseUI.ts","./UIDefine.ts","./Times.ts","./InstanceExport.ts","./AudioMgr.ts","./PlatformDefine.ts","./UIMgr.ts","./Sets.ts","./Config.ts"],(function(t){"use strict";var e,n,o,i,c,s,r,a,u,l,f,p,h,y,S,d;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.ccclass},function(t){i=t.PlatformMgr},function(t){c=t.BaseUI},function(t){s=t.EUILayer},function(t){r=t.Times},function(t){a=t._battle,u=t._prop},function(t){l=t.AudioMgr},function(t){f=t.EBottomAdType,p=t.EPlatformType,h=t.EBlockOnceAdType},function(t){y=t.UIMgr},function(t){S=t.Sets},function(t){d=t._config_}],execute:function(){var m;n._RF.push({},"3f5f0V7myxJVb/ZsyIIof9Y","BattleSuccessToDayUI",void 0);t("BattleSuccessToDayUI",o("BattleSuccessToDayUI")(m=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).layerType=s.Notice,e.blockOnceAdType=h.Show,e.openByAudioUrls=["battle/audio/success"],e.cASkin=null,e.cLabel_cur_time=null,e.cSpriteLoaderCC_icon=null,e._openData=null,e}e(n,t);var o=n.prototype;return o.onCreate=function(){switch(i.type){case p.VIVO:case p.WECHAT:this.bottomAdType=f.Native;break;default:this.bottomAdType=f.Banner}},o.onOpen=function(){i.type!=p.WECHAT&&i.Interstitial.show(),a.report("game_success",{time:r.second()}),this.cLabel_cur_time.string=r.chinaHourCountDown(1e3*this._openData),l.play(this.audioUrls[0]);var t=u.arrowSkin.noUnlocks;if(t.length>0){this.cASkin.active=!0;var e=S.random(t);this.cSpriteLoaderCC_icon.setSpriteFrameUrl(d.Object.skin_item[e].icon_url,!0),u.arrowSkin.unlock(e)}else this.cASkin.active=!1},o.onClickIndex=function(){this.closeUI(),a.exit()},o.onClickShare=function(){i.Share.show(i.Share.getData(),(function(t){t?y.tip("分享成功!"):y.tip("分享失败!")}))},n}(c))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleSuccessUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DirectorHelper.ts","./PlatformMgr.ts","./BaseUI.ts","./UIDefine.ts","./Times.ts","./BattleDefine.ts","./InstanceExport.ts","./AudioMgr.ts","./PlatformDefine.ts","./UIMgr.ts"],(function(e){"use strict";var t,c,s,i,n,o,a,r,l,u,h,f,p,v,y;return{setters:[function(e){t=e.inheritsLoose},function(e){c=e.cclegacy},function(e){s=e.ccclass},function(e){i=e.PlatformMgr},function(e){n=e.BaseUI},function(e){o=e.EUILayer},function(e){a=e.Times},function(e){r=e.EBattleLevelType},function(e){l=e._battle,u=e._main},function(e){h=e.AudioMgr},function(e){f=e.EBottomAdType,p=e.EPlatformType,v=e.EBlockOnceAdType},function(e){y=e.UIMgr}],execute:function(){var A;c._RF.push({},"466b0OduAJPxqulmyZIcDwZ","BattleSuccessUI",void 0);e("BattleSuccessUI",s("BattleSuccessUI")(A=function(e){function c(){for(var t,c=arguments.length,s=new Array(c),i=0;i<c;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))||this).layerType=o.Notice,t.blockOnceAdType=v.Show,t.openByAudioUrls=["battle/audio/success"],t.cNext=null,t.cAShare=null,t.cAIndex=null,t}t(c,e);var s=c.prototype;return s.onCreate=function(){switch(i.type){case p.VIVO:case p.WECHAT:this.bottomAdType=f.Native;break;default:this.bottomAdType=f.Banner}},s.onOpen=function(){switch(l.report("game_success",{time:a.second()}),this.cAIndex.active=!0,l.levelType){case r.level:this.cNext.active=!0,this.cAShare.active=!1,l.curLevel<=3&&(this.cAIndex.active=!1);break;case r.shape:this.cAShare.active=!1,this.cNext.active=l.shapeLevel.cur<l.shapeLevel.max;break;case r.toDay:this.cAShare.active=!1,this.cNext.active=!1;break;case r.custom:this.cNext.active=!1,this.cAShare.active=!0}h.play(this.audioUrls[0]),i.type!=p.WECHAT&&i.Interstitial.show()},s.onClickAIndex=function(){l.report("success_back_home"),this.closeUI(),l.exit(!0)},s.onClickNext=function(){l.report("success_next_level"),this.closeUI(),l.next()},s.onClick=function(e){this.onClickNext()},s.onClickAShare=function(){u.showVideo("好友自创通关分享",(function(){y.tip("分享成功")}),!0)},c}(n))||A);c._RF.pop()}}}));

System.register("chunks:///_virtual/BattleToDayPropUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DirectorHelper.ts","./PlatformMgr.ts","./BaseUI.ts","./UIDefine.ts","./InstanceExport.ts","./UIMgr.ts","./PlatformDefine.ts"],(function(t){"use strict";var e,o,n,r,a,c,i,s,l,u,p,f,y;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy},function(t){n=t.ccclass},function(t){r=t.PlatformMgr},function(t){a=t.BaseUI},function(t){c=t.EUILayer},function(t){i=t._main,s=t._battle,l=t._prop},function(t){u=t.UIMgr},function(t){p=t.EBottomAdType,f=t.EPlatformType,y=t.EBlockOnceAdType}],execute:function(){var d;o._RF.push({},"311cfxJs7JON6SaVPnlfgY5","BattleToDayPropUI",void 0);t("BattleToDayPropUI",n("BattleToDayPropUI")(d=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).layerType=c.Notice,e.blockOnceAdType=y.Show,e}e(o,t);var n=o.prototype;return n.onCreate=function(){switch(r.type){case f.VIVO:case f.WECHAT:this.bottomAdType=p.Native;break;default:this.bottomAdType=p.Banner}},n.onClickVideo=function(){var t=this;i.showVideo("每日礼包",(function(){u.tip("获得成功"),s.storage.set("toDayProp","true"),t.closeUI(),l.back.add(1),l.remove.add(1),l.reset.add(1)}))},o}(a))||d);o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/battle', 'chunks:///_virtual/battle'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});